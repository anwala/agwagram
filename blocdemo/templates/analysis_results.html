{% extends "base.html" %}

{% block title %}
Results | B3T
{% endblock %}

{% block content %}

<div class="content-header">
    <div class="content-header-intro">
        <h2>Analysis of {{account_name}} @{{username}}</h2>
    </div>
    <div class="content-header-actions">
        <!--<button>
            <span class="icon material-symbols-outlined">bolt</span>
            <span>Button 1</span>
        </button>
        <button>
            <span class="icon material-symbols-outlined">settings</span>
            <span>Button 2</span>
        </button>-->
    </div>
</div>
<div class="content">
    <div class="content-main">
        <div class="card-grid">
            <article class="card">
                <div class="card-header">
                    <div>
                        <span class="icon material-symbols-outlined">bolt</span>
                        <h3>Action Analysis</h3>
                    </div>
                    <label class="toggle">
                        <input type="checkbox" onChange="cardToggle(this)">
                        <span></span>
                    </label>
                </div>
                <div class="card-toggle-body">
                    <p>This is more information about the action analysis.</p>
                </div>
                <div class="card-body">
                    <p>{{bloc_action|safe}}</p>
                </div>
                <div class="card-footer">
                    <a href="methodology">More Details</a>
                </div>
            </article>
            <article class="card">
                <div class="card-header">
                    <div>
                        <span class="icon material-symbols-outlined">bolt</span>
                        <h3>Content Syntactic</h3>
                    </div>
                    <label class="toggle">
                        <input type="checkbox" onChange="cardToggle(this)">
                        <span></span>
                    </label>
                </div>
                <div class="card-toggle-body">
                    <p>This is more information about the content syntactic analysis.</p>
                </div>
                <div class="card-body">
                    <p>{{bloc_content_syntactic|safe}}</p>
                </div>
                <div class="card-footer">
                    <a href="methodology">More Details</a>
                </div>
            </article>
            <article class="card">
                <div class="card-header">
                    <div>
                        <span class="icon material-symbols-outlined">bolt</span>
                        <h3>Content Semantic</h3>
                    </div>
                    <label class="toggle">
                        <input type="checkbox" onChange="cardToggle(this)">
                        <span></span>
                    </label>
                </div>
                <div class="card-toggle-body">
                    <p>This is more information about the content semantic analysis.</p>
                </div>
                <div class="card-body">
                    <p>{{bloc_content_semantic|safe}}</p>
                </div>
                <div class="card-footer">
                    <a href="methodology">More Details</a>
                </div>
            </article>
        </div>
    </div>
</div>

<script>
function cardToggle(item) {
    console.log(item.checked);
    var cardDropdown = item.parentElement.parentElement.nextElementSibling;
    console.log(cardDropdown);
    if(item.checked) {
        cardDropdown.classList.add("active");
    } else {
        cardDropdown.classList.remove("active");
    }
}

function calculateCardOffsetHeights() {
    const cardToggleBodies = document.querySelectorAll('.card-toggle-body');
    for (const cardToggleBody of cardToggleBodies) {
        var extendedHeight = 24;
        for (let i = 0; i < cardToggleBody.children.length; i++) {
            extendedHeight += cardToggleBody.children[i].offsetHeight;
        }
    cardToggleBody.style.setProperty('--extended-height', extendedHeight.toString() + "px");
    }
}

window.addEventListener('load', () => {
    calculateCardOffsetHeights();
});

window.addEventListener('resize', function() {
    calculateCardOffsetHeights();
});

</script>

{% endblock %}